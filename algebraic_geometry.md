The idea is to get some mathematical background for elliptic curve and pairing-based cryptography. Notes taken mostly from Diophantine geometry [4] by Hindry and Silverman, Hartshorne [5], Fulton [1], and Shafarevich [6].

Note: An algebraic closure of K will be here denoted as K~ instead of the usual K with a line over it.

# Algebraic geometry

The following notation will be used:

```
k: a perfect field
k~: an algebraic closure of k
G_k = Gal(k~/k): Galois group of k~ over k
```

Although the goal is to study fields k of arithmetic interest, such as Q, Q_p, F_p, geometric properties are best expressed over algebraically closed fields. Why algebraic closure? If for example we consider x^2 + y^2 + 1 = 0 as giving a curve defined over Q, we can see that there are no points on the curve in Q. To "see" the curve, we must look at all the points with coordinates in Q~.

Only algebraically closed fields will be considered also to avoid the following problem (see Shafarevich [6], section 1.1). As k[X, Y] is a unique factorisation domain, any polynomial f has a unique factorisation f = f1^k1 * ... * fr^kr as a product of irreducible factors fi. Then the algebraic curve X given by f = 0 is the union of the curves X_i given by fi = 0. A curve is irreducible if its equation is an irreducible polynomial. In certain cases, these notions are not well defined. For example if k = R then we should call the point (0, 0) a "curve", since it is defined by the equation x^2 + y^2 = 0. However, it is also defined by the equation x^4 + y^4 = 0following problem (see Shafarevich [6], section 1.1). As k[X, Y] is a unique factorisation domain, any polynomial f has a unique factorisation f = f1^k1 * ... * fr^kr as a product of irreducible factors fi. Then the algebraic curve X given by f = 0 is the union of the curves X_i given by fi = 0. A curve is irreducible if its equation is an irreducible polynomial. In certain cases, these notions are not well defined. For example if k = R then we should call the point (0, 0) a "curve", since it is defined by the equation x^2 + y^2 = 0. However, it is also defined by the equation x^4 + y^4 = 0.

This is not a problem in algebraically closed fields.

Lemma (see Proposition 2 in Fulton notes): Let k be an arbitrary field, f from k[x,y] an irreducible polynomial, and g from k[x,y] an arbitrary polynomial. If g is not divisible by f then the system of equations f(x,y) = g(x,y) = 0 has only a finite number of solutions.

An algebraically closed field k is infinite; and if f is not a constant, the curve with equation f(x,y) = 0 has infinitely many points. Because of this, it follows from the lemma that an irreducible polynomial f(x,y) is uniquely determined, up to a constant multiple, by the curve f(x,y) = 0.

## Afine and projective varities

Definition: Affine n-space (over k), which we denote by A^n, is the set:

```
A^n = {(x_1,...,x_n); x_i from k~}
```

The set of k-rational points is the set:

```
A^n(k) = {(x_1,...,x_k) from A^n; x_i from k}
```

Remark: Set of k-rational points can be also defined as:

```
A^n(k) = {(x_1,...,x_k) from A^n; sigma(x_i) = x_i for all sigma from G_k}
```

Let I be an ideal in k~[X_1,...,X_n] = k~[X]. We associate to I its set of zeros:

```
Z(I) = {x from A^n; P(x) = 0 for all P from I}
```

One of the primary goals of algebraic geometry is to understand the spaces thus defined.

Similarly, to each subset S of A^n we associate the ideal of polynomials vanishing on S:

```
I_S = {P from k~[X]; P(x) = 0 for all s from S}
```

Definition: An affine algebraic set S is a set of the form S = Z(I) for some ideal I in k~[X]. The set S is said to be defined over k if its ideal I_S can be generated by polynomials in k[X].

Remarks: 

 * Hilbert basis theorem says that any ideal of polynomials is generated by a finite number of polynomials. Thus, algebraic set can always be written as the zeros of a finite collection of polynomials.

 * If V is an algebraic set defined over k by some ideal I, then its set of k-rational points is defined by:

```
V(k) = {x from A^n(k); P(x) = 0 for all P from I} = {x from V; sigma(x) = x for all sigma from G_k}
```

 * Let's define:

```
I_(V, k) = {P from k[X]; P(x) = 0 for all x from V}
```

Note that we always have I_(V, k) * k~[X] C I_V, and equality occurs exactly when V is defined over k.

Definition: For any ring R, the radical of ideal I C R is defined to be:

```
rad(I) = {a from R; a^r from I for some r >= 1}
```

Lemma A.1.1.1:

 * Let V_i be algebraic subsets of A^n. Then arbitrary intersections ∩_i V_I and finite unions V_1 ∪ ... ∪ V_r are algebraic sets.
 * If S1 C S2 C A^n, then I_S2 C I_S1.
 * If I1 C I2 C k~[X], then Z(I2) C Z(I1).
 * If V is an algebraic set, then Z(I_V) = V.
 * If I is an ideal in k~[X], then I_Z(I) = rad(I).
 
Proof: The first point is true because V1 ∩ V2 = Z(I_V1 + I_V2) and V1 ∪ V2 = Z(I_V1 * I_V2). The last point is a consequence of the next theorem.

Theorem A.1.1.2 (Hilbert's Nullstellensatz): Let I be an ideal of the ring k~[X_1,...,X_n] and let P be a polynomial vanishing at every point in Z(I). Then there is an integer r >= 1 such that P^r from I.

Lemma A.1.1.1 says that there is a natural bijection between algebraic sets and reduced ideals (ideals that are equal to their own radical).

Definition: We define the Zariski topology on A^n by taking the open subsets to be the complements of the algebraic sets. This is a topology, because as seen above the intersection of two open sets is open, and the union of any family of open sets is open. Furthermore, the empty set and the whole space are both open.

Note: Topology is defined by specifying the open sets. Let X be a set. If T is a family of sets with the following properties, it is called a topology:

 * X and {} are in T
 * Any (possibly infinite) union of sets in T is in T
 * The intersection of any finite number of elements of T is in T

Example: Let us consider the Zariski topology on the affine line A^1. Every ideal in A = k[x] is principal, so every algebraic set is the set of zeros of a single polynomial. Since k is algebraically closed, every nonzero polynomial f(x) can be written f(x) = c*(x-a1) * ... * (x-an). Then Z(f) = {a1,...,an}. Thus the algebraic sets in A^1 are finite subsets (including the empty set) and the whole space (corresponding to f = 0). The open sets are the empty set and the complements of finite subsets.

Definition: A nonempty subset Y of a topological space X is irreducible if it cannot be expressed as the union of two proper subsets, each one of which is closed in Y.

Example: A^1 is irreducible, because its only proper closed subsets are finite, yet it is infinite.

Definition: An affine variety is an irreducible algebraic subset of some A^n.

Lemma A.1.1.3:

 * An algebraic set V is irreducible if and only if its ideal I_V is a prime ideal.
 * An algebraic set is a finite union of varieties. If none of the varieties is contained in another one, then this composition is unique.

Note: An affine algebraic variety is an irreducible closed subset of A^n.

Example A.1.1.4: (Affine hypersurfaces) Let P be from k~[X_1,...,X_n] and V = Z(P) be the algebraic set defined by P. Suppose that P = P_1^m1 *** P_r^m_r is the decomposition of P into irreducible factors, and set V_i = Z(P_i). Then the V_i's are the irreducible components of V. Each V_i is a variety and V = V_1 ∪ ... ∪ V_r and V_i is not contained in V_j for i != j.

Definition: Let V be an affine subvariety of A^n. The affine coordinate ring of V is:

```
k~[V] = k~[X_1,...,X_n]/I_V
```

Let's denote with F(V, k) all functions from V to k (this is ring in a usual way: (f + g)(x) = f(x) + g(x) and (f*g)(x) = f(x) * g(x)). We say f from F(V, k) is polynomial function if there exists a polynomial F from k[X1,...,Xn] such that F(a1,...,an) = f(a1,...,an) for all (a1,...,an) from V.

If we observe F, G from k~[V] which are equivalent, we know that F - G from I(V). That means F - G vanishes on V. Thus, F and G are the same on V. That means coordinate ring can be seen as all polynomials which are different on V.

Definition: Projective n-space P^n is the set of lines through the origin in A^(n+1). In symbols:

```
P^n = {(x_0,...,x_n) from A^(n+1); some x_i != 0} / ~ = (A^(n+1) - {0}) / ~
```

where the equivalence relation ~ is defined by:

```
(x_0,...,x_n) ~ (y_0,...,y_n) <=> (x_0,...,x_n) = lambda(y_0,...,y_n) for some lambda from k~ and lambda != 0.
```

If P from P^n is the point representing the equivalence class of the (n+1)-tuple (x_0,...,x_n), the x_i's are called homogeneous or projective coordinates for the point P. The set of k-rational points of P^n, denoted by P^n(k), is the set of lines throught the origin in A^(n+1) that are defined over k. This is the set of points in P^n for which we can find some homogeneous coordinates in A^(n+1)(k). Equivalently, these are the points (x_0,...,x_n) with the property that for any nonyero coordinate x_j, all of the rations x_i/x_j are in k.

The Galois group G_k acts on P^n by acting on the coordinates:

```
sigma(P) = (sigma(x_0),...,sigma(x_n)) for P = (x_0,...,x_n) from P^n and sigma from G_k
```

It can be shown that:

```
P^n(k) = {P from P^n; sigma(P) = P for all sigma from G_k}
```

The field of definition of a point P = (x_0,...,x_n) from P^n is the smallest extension of k over which P is rational, namely:

```
k(P) = k(x_0/x_j, x_1/x_j,...,x_n/x_j) for any j with x_j != 0
```

Equivalently, k(P) is determined by the property:

```
Gal(k~/k(P)) = {sigma from G_k; sigma(P) = P}
```

Definition: Homogeneous polynomial is polynomial with all terms having the same degree (for example x^3 + x * y * z + y^2 * z is a homogeneous polynomial of degree three).

To define projective algebraic sets, we recall that a polynomial ideal is homogeneous if it is generated by homogeneous polynomials, or, alternatively, if the homogeneous components of any polynomial in the ideal are again in the ideal.

If P is a homogeneous polynomial, then:

```
P(x_0,...,x_n) = 0 <=> P(lambda * x_0,...,lambda * x_n) = 0 for all lambda from k~ *
```

We can thus define projective algebraic sets in a fashion entirely analogous to the definition of affine algebraic sets, provided that we use homogeneous polynomials and ideals.

Definition: A projective algebraic set is the set of zeros in P^n of a homogeneous ideal in k~[x_0,...,x_n]. A projective variety is a projective irreducible algebraic set. It is said to be defined over k if its ideal can be generated by polynomials in k[x_0,...,x_n].

A projective algebraic set Z is a projective variety iff I_Z is a (homogeneous) prime ideal in k~[x_0,...,x_n].

An algebraic set defined by one nonzero homogeneous polynomial is called a projective hypersurface. A linear hypersurface is called a hyperplane.

Definition: The homogeneous coordinate ring of a projective variety V ⊂ P^n is the quotient:

```
S(V) = k~[x_0,...,x_n]/I_V
```

Let's explain now how to cover P^n (or any projective variety) by affine spaces and thereby recover the classical description of P^n as the union of affine space A^n together with a hyperplane at infinity.

Definition: Let (x_0,...,x_n) be homogeneous coordinates on P^n. The standard (affine) open subset U_i is the complement of the hyperplane defined by x_i = 0.

It is obvious that the open sets U_i cover P^n. Let's check the following map A^n -> U_i now:

```
(a_1,...,a_n) -> (a1,...,a_(i-1), 1, a_(i+1),...,a_n)
```

Its inverse is:

```
(x_0,...,x_n) -> (x_0/x_i,...,x_(i-1)/x_i, x_(i+1)/x_i,...,x_n/x_i)
```

This map is isomorphism and thus U_i is isomorphic to A^n. Hyperplane x_i = 0 is isomorphic to P^(n-1). Thus:

```
P^n = A^n ∪ P^(n-1) = ... = A^n ∪ ... ∪ A^1 ∪ A^0  
```

## Algebraic maps and local rings

Definition: Let X be a variety and x1 a point on X. A function f: X -> k~ is regular at x1 if there exists an open affine neighborhood U ⊂ X of x1, say U ⊂ A^n, and two polynomials P, Q from k~[x_1,...,x_n] such that Q(x1) != 0 and f(x) = P(x)/Q(x) for all x from U. The function is regular on X if it is regular at every point of X. The ring of regular functions on X is denoted by O(X).

Note that the property of being regular is open. If f is regular at x, then it is regular at every point in some neughborhood at x.

Definition: Let X be a variety and Y ⊂ X a subvariety. The local ring of X along Y, denoted by O_(Y,X), is the set of pairs (U, f), were U is an open subset of X with U ∩ Y != {} and f from O(U) is a regular function on U, and where we identify two pairs (U1, f1) = (U2, f2) if f1 = f2 on U1 ∩ U2. The ring O_(Y,X) is a local ring, its unique maximal ideal being given by:

```
M_(Y,X) = {f from O_(Y,X); f(x) = 0 for all x from Y}
```

Definition: Let X be a variety. The function field of X (or field of rational functions on X), denoted by k~(X), is defined to be O_(X,X), the local ring of X along X (note that f from k~(X) is not a function defined at every point of X).

Definition: A map phi: X -> Y between varieties is a morphism if it is continuous, and if for every open set U ⊂ Y and every regular function on U, the function phi(f) is regular on phi^(-1)(U). A map is regular at a point x if it is a morhpism on some open neughborhood of x.

It can be shown that f is regular at x if there is an affine neighborhood U ⊂ A^m of x in X and an affine neighborhood V ⊂ A^n of phi(x) in Y such that phi sends U into V and such that phi can be defined on U by n polynomials in m variables.

Definition: A rational map from a variety X to a vaiety Y is a map that is a morphism on some nonempty subset of X. A birational map is a rational map that has a rational inverse.

Theorem A.1.2.1: Let V be an affine variety. Then O(V) is isomorphic to k~[V] (remember: O(V) is a ring of regular functions on V and k~[V] = k~[X_1,...,X_n]/I_V).

Theorem A.1.2.2: A regular function on a projective variety is constant.

Theorem A.1.2.3: The image of a projective variety by a morphism is a projective variety.

### Motivation for function field (and regular functions)

Shafarevich [6] gives an example of a curve (in section 1.2) which can be expressed as rational functions of one parameter:

```
y^2 = x^2 + x^3
```

![rational_curve](https://raw.github.com/miha-stopar/crypto-notes/master/img/rational_curve.png)

The parametrization can be obtained by observing that each line (x, tx) intersects curve in exactly one point:

```
x = t^2 - 1
y = t * (t^2 - 1)
```

We say that an irreducible algebraic curve X defined by f(x, y) = 0 is rational if there exist two rational functions phi(t) and psi(t), at least one nonconstant, such that:

```
f(phi(t), ksi(t)) = 0,
```

as an identity in t.

This is beneficial, because if we all coefficients of phi and psi are rational, and we take a rational t0, then (phi(t0), ksi(t0)) is rational. Such parametrization can give as all rational solutions for example for the equation y^2 = x^2 + x^3 if we run t through all rational values.

In more generality, if phi and psi belong to some subfield k0 of k and t0 from k0, then the coordinates of the point (phi(t0), psi(t0)) also belong to k0.

Let's continue with irreducible curve (from above) given by f(x, y) = y^2 - x^2 - x^3. Consider rational functions u(x, y) = p(x, y) / q(x, y), where p and q are polynomials with coefficients in k such that the denominator q(x, y) is not divisible by f(x, y). We say that such a function u(x, y) is a rational function defined on X; and two rational functions p(x,y)/q(x,y) and p1(x,y)/q1(x,y) defined on X are equal on X if the polynomial p(x,y)*q1(x,y) - q(x,y)*p1(x,y) is divisible by f(x,y) (this is because we know that for (x,y) on X it is f(x,y) = 0 and also the polynomial p(x,y)*q1(x,y) - q(x,y)*p1(x,y) is 0 on X, so f divides this polynomial).

Rational functions on X (up to equality on X) form a field. This field is called the function field or field of rational functions of X, and denoted by k(X).

A rational function u(x,y) = p(x,y)/q(x,y) is defined at all points of X where q(x,y) != 0. By assumption q is not divisible by f, it can be proved that there are only finitely many points of X at which u(x,y) is not defined. Thus we can also consider k(X) as functions on X, but defined everywhere except at a finite set.

It can happen that a rational function u has two different expressions u = p/q and u = p1/q1, and that for some point (a, b) from X we have q(a,b) = 0 but q1(a,b) != 0. If u has an expression u = p/q with q(P) != 0, then we say that u is regular at P.

Every element of k(X) can obviously be written as rational function of x and y; now x, y are algebraically dependent (because f(x,y) = 0). It is easy to check from this that k(X) has transcendence degree 1 over k.

### Motivation for rational maps

Let X and Y be two irreducible algebraic plane curves, and u, v from k(X). The map phi(P) = (u(P), v(P)) is defined at all points P of X where both u and v are defined; it is called a rational map from X to Y if phi(P) is on Y for every P from X at which phi is defined.

For example a rational parametrisation of a rational curve X is a rational map of the line to X.

A rational map phi: X -> Y is birational if phi has a rational inverse. 

Birational equivalance is a fundamental equivalence relation in algebraic geometry, and we usually classify algebraic curves up to birational equivalence. We have seen that the rational curves are exactly the curves birational to the line.

Let X and Y be two irreducible algebraic plane curves that are birational, and suppose that the maps between them are given by:

```
(u,v) = (phi(x,y), ksi(x,y)) and (x,y) = (ksi(u,v), eta(u,v))
```

We can establish a relation between the function fields k(X) and k(Y). We define a map k(X) -> k(Y) such that w(x,y) is mapped to (ksi(u,v), eta(u,v)), viewed as a rational function on Y. This is isomorphism between k(X) and k(Y). It holds: two curves are birational iff their rational function fields are isomorphic.

We see that hte problem of classifying algebraic curves up to birational equivalence is a geometric aspect of the natural algebraic problem of classifying finitely generated extension fields of k of transcendence degree 1 up to isomorphism. Also, it turns out any finite transcendence degree extension has a geometric interpretation.

## Closed subsets of affine space

From Shafarevich [6], section 2.1: there have been changing views on the basic object of study in algebraic geometry: projective or quasiprojective varieties, abstract algebraic varieties, schemes or algebraic spaces.

The definition of a closed set was given above. Any open set U where x ∈ U is called a neighbourhood of x. The intersection of all the closed subsets of X containing a given subset M ⊂ X, is closed. It is called the closure of M and here denoted by M~ (standard notation use line over M). A subset M is dense in X if X = M~.

### Regular functions on a closed subset

Let X be a closed set in the affine space A^n over the field k.

Definition: A function f defined on X with values in k is regular if there exists a polynomial F(T) with coefficients in k such that f(x) = F(x) for all x from X.

The definition of a coordinate ring K[X] for a variety X was given above.

Examples of coordinate rings:

(Shafarevich) Example 1.9: Let X ⊂ A^2 be given by the equation x * y = 1. Then K[X] = k[x, 1/x], and it consists of all the rational functions in x of the form p(x)/x^n with p(x) a polynomial and n >= 0. (Note that k[x,y]/(x*y - 1) isomorphic k[x, 1/x])

### Regular maps

X, Y closed subsets in A^n.

Definition: A map f: X -> Y is regular if there exists m regular functions f_1,...,f_m on X such that f(x) = (f_1(x),...,f_m(x)) for all x from X.

(Shafarevich) Example 1.13: The projection map (x,y) -> x defines a regular map of the curve defined by x*y = 1 to A^1.

(Shafarevich) Example 1.15: The map f(t) = (t^2, t^3) is a regular map of the line A^1 to the curve given by y^2 = x^3.

### How regular map acts on the ring of regular functions on a closed set

If we have f: X -> Y an arbitrary map. Then we can associate with every function u on Y a function v on X by setting: 

```
v(x) = u(f(x))
```

We set v = f\*(u), and call it the pullback of u. We have a map f\* from functions on Y to functions on X. If f is regular, then f\* takes regular functions on Y to regular functions on X. Moreover, regular maps can be characterized as the maps that take regular functions into regular functions.

If f is regular then the pullback of functions defines a map f\*: k[Y] -> k[X]. It follows that f\* is a homomrphism of k-algebras.

Definition: A regular map f: X -> Y of closed sets is an isomorphism if it has an inverse, that is, if there exists a regular map g: Y -> X such that f = g^(-1).

(Shafarevich) Example 1.17: The generalised parabola, defined by the equation y = x^k is isomorphic to the line, and the maps f(x,y) = x and g(t) = (t, t^k) define an isomorphism.

(Shafarevich) Example 1.18: The projection f(x,y) = x of the hyperbola x*y = 1 to the x-axis is not an isomorphism, since the map is not a one-to-one correspondence: the hyperbola does not contain any point (x,y) for which f(x,y) = 0.

(Shafarevich) Example 1.19: The map f(t) = (t^2, t^3) of the line to the curve defined by y^2 = x^3 is easily seen to be a one-to-one correspondence.

Thus, the question is what are the notions and properties of closed sets invariant under isomorphism. The system of equations defining a set is not a notion of this kind - two sets X and Y can be isomorphic although given by different systems of equations in different spaces A^n. An intrinsic definition of a closed set independent of its realisation in some affine space is actually given by something called a scheme.

### Rational functions

Definition: If a closed set X is irreducible then the field of fractions of the coordinate ring k[X] is the function field or field of rational functions on X; it is denoted by k(X).

Note that a function f defined on X with values in k is regular if there exists a polynomial F(T) with coefficients in k such that f(x) = F(x) for all x from X. Observing map which associates each polynomial F(T) from k[T] a function f from k[X], we can see that the kernel of it is I(X) (ideal of X). Thus:

```
k[X] = k[T]/I(X)
```

Field of fractions k(X) consists of rational functions F(T)/G(T) such that G(T) is not in I(X), and F/G = F1/G1 if F*G1 - F1*G from I(X). It can be constructed as follows. Considering the subring O_X ⊂ k(T_1,...,T_n) of functions f = P/Q where P, Q from k[T] and Q is not from I(X). The functions f with P in I(X) form an ideal M_X and:

```
k(X) = O_X / M_X
```

Definition: A rational function phi from k(X) is regular at x from X if it can be written in the form phi = f/g with f, g from k(X) and g(x) != 0. In this case we say that the element f(x)/g(x) from k is the value of phi at x, and denote it by phi(x).

(Shafarevich) Theorem 1.7: A rational function phi that is regular at all points of a closed subset is a regular function on X (note: that means phi is from k[X]).

Proof: For every x from X exists f_x, g_x from k[X] such that phi = f_x/g_x and g_x(x) != 0. Let's check the ideal generated by g_x, for all x from X. It has a finite basis: {g_x1,...,g_xn}. If all g_xi would vanish on some x from X, then g_x(x) would be 0, which is not. Thus g_xi don't have a common factor. Hence, there exist functions u_1,...,u_n in k[X], such that u_1 * g_x1 + ... + u_n * g_xn = 1. If we multiply both sides by phi (note that phi = f_xi/g_xi), we see that phi is regular (from k[X]).

If phi is a rational function on a closed set X, it can be proved that the set of points at which phi is regular is nonempty and open. For any finite set of rational functions, there is some nonempty open set on which they are all defined and can be compared. This is useful because a rational function phi from k(X) is uniquely determined if it is specified on some nonempty open subset U ⊂ X.

## Rational maps

Definition: A rational map phi: X -> Y ⊂ A^m is an m-tuple of rational functions phi_1,...,phi_m from k(X) such that, for all points x from X at which all the phi_i are regular, phi(x) = (phi_1(x),...,phi_m(x)) in Y. We say that phi is regular at such a point x, and phi(x) in Y is the image of x.

As mentioned above there exists a nonempty set U ⊂ X on which all the rational functions phi_i are defined, hence also the rational map phi = (phi_1,...,phi_m).

To check that rational functions phi_1,...,phi_m from k(X) define a rational map phi: X -> Y we need to check that phi_1,...,phi_m, as elements of k(X), satisfy all the equations of Y.

How rational maps act on rational functions on a closed set. Let phi: X -> Y be a rational map and assume that phi(X) is dense in Y. Consider phi as a map U -> phi(X) ⊂ Y, where U is the domain of definition of phi. For any function f from k[Y] the function phi\*(f) is a rational function on X. phi\* is actually an isomorphic inclusion k[Y] -> k(X). This inclusion can be extended to an isomorphic inclusion from k(Y) -> k(X).

Definition: A rational map phi: X -> Y is birational if phi has an inverse rational map ksi: Y -> X, that is, phi(X) is dense in Y and ksi(Y) in X, and ksi(phi(x)) = phi(ksi(x)) where defined.





## Dimension

Definition: The dimension of a variety V defined over k~ is the transcendence degree of its function field k~(V) over k~. The dimension of an algebraic set is the maximum of the dimensions of its irreducible components.

Remember: The transcendence degree of an extension field K over a field F is the smallest number elements of K which are not algebraic over F, but needed to generate K.

From Hartshorne:
Definition: If X is a topological space, we define the dimension of X to be the supremum of all integers n such that there exists a chain Z_0 ⊂ Z_1 ⊂ ... ⊂ Z_n of distinct irreducible closed subsets of X. We define the dimension of an affine variety to be its dimension as a topological space.

Both, A^n and P^n have dimension n. The dimension of a hypersurface in A^n or P^n is n-1.

Example: The dimension of A^1 is 1, because the only irreducible closed subsets of A^1 are the whole space and single points.

Definition: The height of a prime ideal p in a ring A is the supremum of all n such that there exists a chain of distinct prime ideals p_0 ⊂ ... ⊂ p_n = p. The Krull dimension of the ring A is the supremum of the heights of its prime ideals.

Theorem A.1.3.2:

 * Let V be an affine algebraic set. Then dim(V) = Krulldim(k~[V]).
 * Let V be an affine variety and let p be a prime ideal in k~[V]. Then: height(p) + Krulldim(k~[V]/p) = Krulldim(k~[V]).
 * Let W be a subvariety of V. Then: Krulldim(O_(W,V)) = dim(V) - dim(W).

Corollary A.1.3.3: Let V be a variety, and let W be a closed algebraic subset of V. If W != V, then dim W < dim V.

Proposition A.1.3.4: let v be an affine variety of dimension l in A^, and let Z be a hypersurface in A^n. Then either V is contained in Z, or else all of the components of V ∩ W have dimension exactly l-1 (note that V ∩ W may consist of zero components!).

Theorem A.1.3.5: Let V and W be affine varieties in A^n of dimensions l and m, respectively. Then every component of V ∩ W has dimension at least l + m - n.

Theorem A.1.3.6: Let V and W be projective varieties in P^n of dimensions l and m, respectively. Then every component of V ∩ W has dimension at least l + m - n >= 0. Furthermore, if l + m - n >= 0, then V ∩ W is not empty.

## Tangent spaces and differentials

Classical differential calculus defined in algebraic manner is needed to apply concepts like smoothness, tangent spaces, and differentials.

### Singular and nonsingular points

From coordinate geometry: a point P is a singular point or singularity of the curve defined by f(x,y) = 0 if (df/dx)(P) = (df/dy)(P) = f(P) = 0. A cuve all of whose points are nonsingular is nonsingular or smooth.

From Shafarevich [6], section 1.6:
For an irreducible curve, either (df/dx) vanishes at only finitely many points of the curve, or (df/dx) is divisible by f (due to Lemma from the top of the page). But as (df/dx) has smaller degree than f, (df/dx) = 0. The same holds for (df/dy). This implies, if char k = 0, that f is constant, and, if char k = p > 0, that f involves x and y only as p-th powers. In this last case, taking p-th roots of the coefficients of f and using (a + b)^p = a^p + b^p:

```
f = SUM(a_(i,j) * x^(p*i) * y^(p*j)) = (SUM(b_(i,j) * x^i * y^j))^p where b_(i,j)^p = a_(i,j)
```

This contradicts the irreducibility of the curve.

If k = R and P is a nonsingular point of the curve with equation f(x,y) = 0, then by the implicit function theorem we can write y as a function of x in some neighbourhood of P. Substituting this expression for y, this represents any rational function on the curve as a function of x near P.

(Shafarevich) Theorem 1.1: At any nonsingular point P of an irreducible algebraic curve, there exists a regular function t that vanishes at P and such that every rational function u that is not identically 0 on the curve can be written in the form:

```
u = t^k * v
```

with v regular at P and v(P) != 0. The function u is regular at P iff k >= 0. See Fulton [1], Proposition 4.

In affine coordinates, the equation of the tangent in point P = (a, b) is:

```
(df/dx)(P)(x-a) + (df/dy)(P)(y-b) = 0
```

An affine algebraic curve of degree n with equation f(x,y) = 0 defines a homogeneous polynomial F(ksi, eta, zeta) = zeta^n * f(ksi/zeta, eta/zeta), and hence a projective curve with equation F(ksi, eta, zeta) = 0. It holds f(x,y) = F(x,y,1).

By the Euler theorem on homogeneous functions we know:

```
(dF/dx) * x + (dF/dy) * y + (dF/dz) * z = n * F
```

And in point P (=(a,b,1)):

```
(dF/dx)(P) * a + (dF/dy)(P) * b + (dF/dz)(P) * 1 = n * F
```

Now let's use to get the equation of the tangent in homogeneous coordinates:

```
(dF/dx)(P)(x-a) + (dF/dy)(P)(y-b) = 0
(dF/dx)(P) * x - (dF/dx)(P) * a + (dF/dy)(P) * y - (dF/dy)(P) * b  = 0
(dF/dx)(P) * x - (dF/dx)(P) * a + (dF/dy)(P) * y - (dF/dy)(P) * b  = 0
(dF/dx)(P) * x + (dF/dy)(P) * y + (dF/dz)(P)  = 0
```

### Rational function A^2 -> A^2 into map P^2 -> P^2

Substituting x = ksi/zeta, y = eta/zeta and clearing denominators, we can write a rational function f = p(x,y)/q(x,y) on A^2 in the form P(ksi, eta, zeta)/Q(ksi, eta, zeta), where P and Q are homogeneous polynomials of the same degree.

Given a rational map phi: A^2 -> A^2 defined by (x,y) -> (u(x,y), v(x,y)), we first rewrite it as above:

```
U(ksi, eta, zeta)/R(ksi, eta, zeta)
V(ksi, eta, zeta)/S(ksi, eta, zeta)
```

where U, V, R, S are homogeneous polynomials, with deg U = deg R and deg V = deg S. Next we put it over a common denominator: (A/C, B/C), with deg A = deg B = deg C.

```
(ksi, eta, zeta) -> (A(ksi, eta, zeta)/C(ksi, eta, zeta), B(ksi, eta, zeta)/C(ksi, eta, zeta))
```

Finally, into homogeneous coordinates:

```
(ksi, eta, zeta) -> (A(ksi, eta, zeta), B(ksi, eta, zeta), C(ksi, eta, zeta))
```

where A, B, C are homogeneous polynomials of the same degree. Now phi is naturally a rational map P^2 -> P^2. The map is regular at a point P if one of A, B, C does not vanish on P. Studying properties related to points P in the affine set A^2, say, we can divide each of A, B, C, where n is their common degree, and write the map in the form (x,y) -> (u(x,y), v(x,y), w(x,y)), where u, v and w are polynomials. This map is regular at P if the 3 polynomials do not vanish simultaneously at P.

(Shafarevich) Theorem 1.2: A rational map from a projective plane curve C to P^2 is regular at every nonsingular point of C.

Proof: Suppose that the nonsingular point P is in the affine A^2 with coordinates denoted by x, y. We write the map as above in the form (x, y) -> (u_0, u_1, u_2), where u_i are polynomials. Due to the Theorem 1.1, we can write u_i = t^k_i * v_i, where t is a local (uniformizing) parameter, v_i(P) != 0 and k_i >= 0. Suppose that k_0 is the smallest of k_i. Then the same map can be written in the form (x,y) -> (v_0, t^(k_1 - k_0) * v_1, t^(k_2 - k_0) * v_2), with k_1 - k_0 >= 0, k_2 - k_0 >= 0, and v_0(P) != 0. Thus the map is regular at P.




TODO



### Tangent space

Let V be an affine variety defined by the equations:

```
f1(x1,...xn) = ... = fm(x1,...,xn) = 0
```

A natural way to define the tangent space to V at the point P = (a1,...,an) is:

```
(dfj/dx1)(P)(x1 - a1) + ... + (dfj/dxm)(P)(xn-an) for all 1 <= j <= m
```

However, to have a definition that is independent of the particular equations for V, tangent space needs to be defined differently.









# Notes from Fulton [1]

First the correspondence between algebraic sets in affine and projective space and ideals in polynomial rings needs to be explored.

The monomials in R[X_1,...,X_n] are the polynomials X_1^i_1 * X_2^i_2 * ... * X_n^i_n where i_j are nonnegative integers. The degree of the monomial is i_1 + ... + i_n.

Polynomial is called homogeneous (or a form) of degree d, if all its monomials are of degree d.

An element a in a ring R is irreducible if is is not a unit of zero, and for any factorization a = b * c; b, c from R, either b or c is a unit.

The quotient field of k[X_1,...,X_n] is written k(X_1,...,X_n), and is called the field of rational functions in n variables over k.

If R is a UFD with quotient field K, then any irreducible element F from R[X] remains irreducible when considered in K[X].

If phi: R -> S is ring homomorphism, the set phi^(-1)(0) of elements mapped to zero is the kernel of phi, written as Ker(phi). Ker(phi) is ideal in R.

Let I be an ideal in a ring R. The residue class ring of R modulo I is written R/I and is the set of equivalence classes of elements in R under the equivalance relation: a ~ b if a - b from I.

The classes R/I form a ring in such a way that the mapping pi: R -> R/I is ring homomorphism.

The ring R/I is characterized by the following property: if phi: R -> S is a ring homomorphism to a ring S and phi(I) = 0, then there is a unique ring homomorphism phi1: R/I -> S such that phi = phi1(pi).

## Affine algebraic sets

### Affine space and algebraic sets

Let k be a field. By A^n(k) (or A^n) we denote the cartesian product of k with itself n times. A^(k) is the set of n-tuples of elements of k. A^1(k) is the affine line, A^2(k) the affine plane.

If F from k[X_1,...,X_n], a point P = (a_1,...,a_n) from A^n(k) is called a zero of F if F(P) = 0. If F is not a constant, the set of zeros of F is called the hypersurface defined by F.

More generally, if S is a set of polynomials in k[X_1,...,X_n], we define V(S) = {P from A^n; F(P) = 0 for all F from S}.

V(S) = intersection of V(F) for each F from S.

If S = {F1,...,Fr}, we write V(F1,...,Fr) instead of V({F1,...,Fr}).

Definition: a subset X of A^n is an (affine) algebraic set if X = V(S) for some S.

It can be quickly verified:

 * If I is the ideal in k[X_1,...,X_n] generated by S, then V(S) = V(I); so every algebraic set is equal to V(I) for some ideal I.
 * If {I_1,...,I_m} is a set of ideals, then V(I_1 ∪...∪ I_m) = V(I_1) ∩...∩ V(I_m), so the intersection of any collection of algebraic sets is an algebraic set. 
 * If I ⊂ J, then V(I) ⊃ V(J).
 * V(FG) = V(F) ∪ V(G) for any polynomials F, G.
 * V(I) ∪ V(J) = V({FG; F from I, G from J); so any finite union of algebraic sets is an algebraic set.
 * V(0) = A^n(k); V(1) = {}; V(X_1 - a_1,...,X_n - a_n) = (a_1,...,a_n). So any finite subset of A^n(k) is an algebraic set.

### Ideal of a set of points

X is a subset of A^n(k). Polynomials which maps points from X to 0 form an ideal, called the ideal of X, and written I(X). It can be quickly verified:

 * If X ⊂ Y, then I(X) ⊃ I(Y).
 * I({}) = k[X_1,...,X_n]; I(A^(k)) = (0) if k is an infinite field; I({(a_1,...,a_n)}) = (X_1 - a_1,...,X_n-a_n) for a_1,...,a_n from k.
 * I(V(S)) ⊃ S for any set S of polynomials; V(I(X)) ⊃ X for any set X of points.
 * V(I(V(S))) = V(S) for any set S of polynomials, and I(V(I(X))) = I(X) for any set X of points. So if V is an algebraic set, V = V(I(V)), and if I is the ideal of an algebraic set, I = I(V(I)).

An ideal that is the ideal of an algebraic set has a property not shared by all ideals: I(X) is a radical ideal for any X ⊂ A^n(k).

Definition: If I is any ideal in a ring R, we define the radical of I, written Rad(I), to be {a from R; a^n from I for some integer n > 0}. Rad(I) is an ideal containing I. An ideal is radical if I = Rad(I).

### Hilbert basis theorem

Theorem: Every algebraic set is the intersection of a finite number of hypersurfaces.

Proof: Let the algebraic set be V(I) for some ideal I ⊂ k[X_1,...,X_n]. It is enough to show that I is finitely generated, for if I = (F_1,...,F_r), then V(I) = V(F_1) ∩...∩ V(F_r).

The theorem is the consequence of the Hilbert basis theorem: 

Theorem 1: If R is a Noetherian ring, then R[X_1,...,X_n] is a Noetherian ring.

Definition: A ring is Noetherian if every ideal in the ring is finitely generated (fields are Noetherian rings).

Proof sketch of Hilbert basis theorem: Since R[X_1,...,X_n] is isomorphic to R[X_1,...,X_(n-1)][X_n], the theorem will follow by induction if we can prove that R[X] is Noetherian whenever R is Noetherian. Let I be an ideal in R[X]. We must find a finite set of generators for I.

If F = a_1 + a_2 * X + ... + a_d * X^d from R[X], a_d != 0, we call a_d the leading coefficient of F. Let J be the set of leading coefficients of all polynomials in I. J is an ideal in R, so there are polynomials F_1,...,F_r from I whose leading coefficients generate J. We then take an integer N larger than the degree of each F_i. For each m <= N, let J_m be the ideal in R consisting of all leading coefficients of all polynomials F from I such that deg(F) <= m. Each J_m is finitely generated, let's denote the corresponding (as above) polynomials for J_m as Poly_m. Let an ideal I1 be the ideal generated by F_1,...,F_r and polynomials from Poly_m for each m. It can be shown that I1 = I.

### Irreducible components of an algebraic set

An algebraic set may be the union of several smaller algebraic sets. An algebraic set V ⊂ A^n is reducible if V = V_1 ∪ V_2, where V_1, V_2 are algebraic sets in A^n, and V_i != V, i = 1,2. Otherwise V is irreducible.

Proposition 1: An algebraic set V is irreducible iff I(V) is prime.

Proof: If I(V) is not prime, we have F_1 * F_2 from I(V) and F_1, F_2 not from I(V). Because F_1 * F_2 vanishes on all V, each point on V is mapped to 0 either by F_1 or F_2. This means V ⊂ V(F_1) ∪ V(F_2). We can write V = (V ∩ V(F_1)) ∪ (V ∩ V(F_2)). In other direction: if V = V_1 ∪ V_2 where V_1 and V_2 are proper subsets, then we can choose F_i from I(V_i) which is not from I(V). Then F_1 * F_2 is from I(V), so I(V) is not prime. 

Lemma: Any nonempty collection of ideals in a Noeterian ring R has a maximal member (ideal that is not contained in any other ideal of this collection).

Consequently: Any collection of algebraic sets in A^n(k) has a minimal member.

Theorem 2: Let V be an algebraic set in A^n(k). Then there are unique irreducible algebraic sets V_1,...,V_m such that V = V_1 ∪ ... ∪ V_m and V_i not contained in V_j for all i != j. This is called decomposition of V into irreducible componets.

### Algebraic subsets of the affine plane A^2(k)

Proposition 2: Let F and G be polynomials in k[X, Y] with no common factors. Then V(F, G) = V(F) ∩ V(G) is a finite set of points.

Proof: We know that k(X)[Y] is a PID (principal ideal domain). In PID it holds: F, G from PID and gcd(F, G) = 1, then there exists R, S such that R * F + S * G = 1. We know k[X, Y] is isomorphic to k[X][Y], and we know that if F, G have no common factors in k[X][Y], then F, G have no common factors in k(X)[Y] (field of fractions). Thus there exists R, S from k(X)[Y] such that R * F + S * G = 1. We can multiply this equation with some nonzero D from k[X]: D * R * F + D * S * G = D. Now if (a, b) from V(F, G), we know that D(a) = 0. As D has finite zeros (polynomial of one variable), it means that V(F, G) contains only a finite number different X-coordinates. Similarly for Y-coordinates.

Corollary 1: If F is an irreducible polynomial in k[X, Y] such that V(F) is infinite, then I(V(F)) = F, and V(F) is irreducible.

Proof: Let't take G from I(V(F)). As F is irreducible, G and F have no common factors. By Proposition 2 this means V(F, G) has a finite number of points. This is contradiction, so I(V(F)) = F. That V(F) is irreducible follows from Proposition 1 (because I(V(F)) is prime).

Corollary 2: Suppose k is infinite. Then the irreducible algebraic subsets of A^2(k) are A^2(k), {}, points, and irreducible plane curves V(F), where F is an irreducible polynomial and V(F) is infinite.

Corollary 3: Assume k is algebraically closed, F a noconstant polynomial in k[X, Y]. Let F = F_1^n_1 * ... * F_r^n_r be the decomposition of F into irreducible factors. Then V(F) = V(F_1) ∪ ... ∪ V(F_r) is the decomposition of V(F) into irreducible components, and I(V(F)) = (F_1 * ... * F_r).

### Hilbert's Nullstellensatz

For a given algebraic set V, Proposition 2 tells whether V is irreducible or not (algebraic set V is irreducible iff I(V) is prime). But what about V, given a set of polynomials that define V?

Hilbert's Nullstellensatz: Let I be an ideal in k[X_1,...,X_n] where k is algebraically closed. Then I(V(I)) = Rad(I).

Corollary 1: If I is a radical ideal in k[X_1,...,X_n], then I(V(I)) = I. So there is a one-to-one correspondence between radical ideals and algebraic sets.

Corollary 2: If I is a prime ideal, then V(I) is irreducible. There is a one-to-one correspondence between prime ideals and irreducible algebraic sets.

## Affine varieties

From now on k will be a fixed algebraically closed field. Affine algebraic sets will be in A^n = A^n(k) for some n. An irreducible affine algebraic set is called affine variety.

### Rational functions and local rings

Let V be a nonempty variety in A^n, K[V] its coordinate ring. Since K[V] is a domain, we may form its quotient field. This field is called the field of rational functions on V, and is written k(V).

Let P from V. We define O_P(V) to be the set of rational functions on V that are defined at P. O_P(V) forms a subring of k(V) and it holds: k ⊂ K(V) ⊂ O_P(V) ⊂ k(V). The ring O_P(V) is called the **local ring of V at P**.

The set of points P from V where a rational function f is not defined is called the pole set of f.

Proposition 2: 
 
 * The pole set of a rational function is an algebraic subset of V.
 * K(V) = ∩_(P from V) O_P(V).

The ideal m_P(V) = {f from O_P(V); f(P) = 0} is called the maximal ideal of V at P. It is the kernel of the evaluation homomorphism f -> f(P) of O_P(V) onto k, so O_P(V)/m_P(V) is isomorphic to k. An element f from O_P(V) is a unit in O_P(V) iff f(P) != 0, so m_P(V) = {non-units of O_P(V)}.

Lemma: The following conditions on a ring R are equivalent:

 * The set of non-units in R forms an ideal.
 * R has a unique maximal ideal that contains every proper ideal of R.

Proof: If non-units form an ideal, it is clear that this ideal contains every proper ideal of R, because an ideal cannot contain a unit (if it contains a unit, it contains 1, and consequently it contains the whole R) and thus all elements (which can be in an ideal) are already exhausted. Conversely, let's say we have a non-unit which is not in a unique maximal ideal that contains every proper ideal of R. This cannot be, because ideal generated by this non-unit is contained in it.

A ring satisfying the conditions of the lemma is called a local ring. We have seen that O_P(V) is a local ring, and m_P(V) is its unique maximal ideal. It turns out, all the properties of V that depend only on a "neighborhood" of P (local properties) are reflected in ring O_P(V).

### Discrete valuation rings 

Proposition 4: Let r be a domain that is not a field. Then the following are equivalent:

 * R is Noetherian and local, and the maximal ideal is principal.
 * There is an irreducible element r in R such that every nonzero z from R may be written uniquely in the form z = u * t^n, u a unit in R, n a nonnegative integer.

Proof. (1) implies (2): Let's m be a maximal ideal and t its generator. Suppose u * t^m = v * t^n. Then u * t^(m-n) = v is a unit and thus m = n (since t is a non-unit). That means the expression of any z = u * t^n is unique. Now we need to show that such an expression exists for z. If it is unit, it is done. If is a non-unit, then z = z1 * t (as t is a generator). If z1 is a unit, it is done. If not, we write z1 = z2 * t. We continue this way and we argue that this process eventually stops. It stops because the union of ideals (z1) ⊂ (z2) ⊂ (z3) ... is finitely generated (R is Noetherian).
(2) implies (1): m = (t) is the set of non-units. The only ideals in R are the principal ideals (t^n), n a nonegative integer, so R is a PID.

A ring satisfying the conditions of Proposition 4 is called a discrete valuation ring, written DVR. An element t is called a uniformizing parameter for R.

Note that Shafarevich [6] (see Theorem 1.1) calls t local parameter.






# [2]

We have a perfect field K and a fixed algebraic closure of K (which we denote as K~ instead of the usual K with a line over it).

An algebraic set is a set of points P for which f(P) = 0 for each f from ideal I ⊂ K~[X]. If V is an algebraic set, the ideal of V is denoted as I(V).

```
I(V) = {f from K~[X]: f(P) = 0 for all P from V}
```

An algebraic set V is called an (affine) variety if I(V) is a prime ideal in K~[X].

A prime ideal is an ideal I such that if a * b from I, then either a from I or b from I.

I(V/K) = I(V) ∩ K[X]

Let I(V/K) be a variety (V is a variety defined over K). Affine coordinate ring of V/K is define by:

```
K[V] = K[X]/I(V/K)
```

K[V] is an integral domain. Its quotient field (field of fractions) is denoted by K(V) and is called the function field of V/K. Similarly are defined K~[V] and K~(V).

When studying geometric objects, the common question is whether they are reasonably "smooth". Let's say V is a variety, given by a single nonconstant polynomial equation f(X_1,...,X_N) = 0. By using Jacobian criterion for the existence of a tangent plane, we say a point P from V is singular iff:

```
(df/dX_1)(P) = ... = (df/dX_N)(P) = 0
```

Let's say we have two varieties:

```
V1: Y^2 = X^3 + X
V2: Y^2 = X^3 + X^2
```

It can be quickly checked that V1 has no singular points and V2 has a singular point in (0, 0).




[1] Fulton, William. "Algebraic curves." An Introduction to Algebraic Geom (2008): 54.

[2] Silverman, Joseph H. The arithmetic of elliptic curves. Vol. 106. Springer Science & Business Media, 2009.

[3] Cohen, Henri, et al., eds. Handbook of elliptic and hyperelliptic curve cryptography. CRC press, 2005.

[4] Hindry, Marc, and Joseph H. Silverman. Diophantine geometry: an introduction. Vol. 201. Springer Science & Business Media, 2013.

[5] Hartshorne, Robin. Algebraic geometry. Vol. 52. Springer Science & Business Media, 2013.

[6] Shafarevich, Igorʹ Rostislavovich, and Kurt Augustus Hirsch. Basic algebraic geometry. Vol. 2. Berlin: Springer-Verlag, 1994.
